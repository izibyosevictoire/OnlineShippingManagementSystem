<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org">
<head>
    <meta charset="UTF-8">
    <title>Online Shipping Management System</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet">
</head>
<body class="bg-light">
<div class="container mt-5">
    <h1 class="text-center mb-5 text-primary fw-bold">Online Shipping Management System</h1>
    
    <div class="text-center mb-5">
        <form method="post" action="/create" class="d-inline">
            <button class="btn btn-success btn-lg px-5 shadow">Create New Shipment</button>
        </form>
    </div>

    <div th:if="${shipments == null or shipments.isEmpty()}" class="alert alert-info text-center">
        No shipments yet. Click the button above to create one!
    </div>

    <div class="row row-cols-1 row-cols-md-3 g-4">
        <div th:each="s : ${shipments}" class="col">
            <div class="card h-100 shadow-sm">
                <div class="card-header bg-primary text-white text-center">
                    <h5 th:text="${s.trackingNumber}">TRK123456789</h5>
                </div>
                <div class="card-body text-center">
                    <p><strong>Carrier:</strong> <span class="badge bg-info text-dark fs-6" th:text="${s.carrier}">DHL</span></p>
                    
                    <p><strong>Status:</strong></p>
                    <span class="badge fs-5 px-4 py-2"
                          th:text="${s.status}"
                          th:classappend="${
                            s.status == 'DELIVERED' ? 'bg-success' :
                            s.status == 'IN_TRANSIT' ? 'bg-warning text-dark' :
                            s.status == 'PICKED_UP' ? 'bg-primary' :
                            'bg-secondary'
                          }">
                        PENDING
                    </span>

                    <form method="post" th:action="@{/update/{id}(id=${s.id})}" class="mt-3">
                        <select name="status" class="form-select form-select-sm mb-2">
                            <option value="PENDING">Pending</option>
                            <option value="PICKED_UP">Picked Up</option>
                            <option value="IN_TRANSIT">In Transit</option>
                            <option value="DELIVERED">Delivered</option>
                        </select>
                        <button class="btn btn-outline-primary w-100">Update Status</button>
                    </form>
                </div>
                <div class="card-footer text-muted small text-center">
                    Created: <span th:text="${#temporals.format(s.createdAt, 'dd MMM yyyy HH:mm')}">01 Jan 2025</span>
                </div>
            </div>
        </div>
    </div>
</div>
</body>
</html>
